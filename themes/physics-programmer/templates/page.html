{% extends "base.html" %}

{% block title %}{{ page.title }} - {{ SITENAME }}{% endblock title %}

{% block description %}{{ page.summary or page.content|striptags|truncate(160) }}{% endblock description %}

{% block body_class %}page{% endblock body_class %}

{% block structured_data %}
{{ super() }}
<script type="application/ld+json">
{
    "@context": "https://schema.org",
    "@type": "WebPage",
    "name": "{{ page.title }}",
    "description": "{{ page.summary or page.content|striptags|truncate(160) }}",
    "url": "{{ SITEURL }}/{{ page.url }}",
    "author": {
        "@type": "Person",
        "name": "{{ AUTHOR }}"
    },
    "publisher": {
        "@type": "Organization",
        "name": "{{ SITENAME }}",
        "url": "{{ SITEURL }}"
    }
}
</script>
{% endblock structured_data %}

{% block content %}
<div class="page-container">
    <header class="page-header">
        <div class="container">
            <div class="page-breadcrumb">
                <nav aria-label="Breadcrumb">
                    <ol class="breadcrumb">
                        <li><a href="{{ SITEURL }}/">Home</a></li>
                        <li aria-current="page">{{ page.title }}</li>
                    </ol>
                </nav>
            </div>
            
            <h1 class="page-title">{{ page.title }}</h1>
            
            {% if page.summary %}
            <p class="page-summary">{{ page.summary }}</p>
            {% endif %}
            
            {% if page.date %}
            <div class="page-meta">
                <time class="page-date" datetime="{{ page.date.isoformat() }}">
                    Last updated: {{ page.date.strftime('%B %d, %Y') }}
                </time>
            </div>
            {% endif %}
        </div>
    </header>
    
    <main class="page-content">
        <div class="container">
            <div class="content-wrapper">
                <article class="page-main">
                    {% if page.slug == 'about' %}
                    <!-- About page specific layout -->
                    <div class="about-hero">
                        <div class="about-intro">
                            {{ page.content }}
                        </div>
                        
                        <div class="about-highlights">
                            <div class="highlight-card">
                                <h3>Research Focus</h3>
                                <ul class="focus-list">
                                    {% for domain in RESEARCH_DOMAINS %}
                                    <li>{{ domain }}</li>
                                    {% endfor %}
                                </ul>
                            </div>
                            
                            <div class="highlight-card">
                                <h3>Active Projects</h3>
                                <p class="stat-large">{{ articles|length }}</p>
                                <p class="stat-description">Current research initiatives</p>
                            </div>
                            
                            <div class="highlight-card">
                                <h3>Collaboration</h3>
                                <p class="stat-large">European</p>
                                <p class="stat-description">Multi-national research networks</p>
                            </div>
                        </div>
                    </div>
                    
                    {% if ACADEMIC_PROFILES %}
                    <section class="academic-presence">
                        <h2>Academic Profiles</h2>
                        <div class="academic-grid">
                            {% for platform, id in ACADEMIC_PROFILES.items() %}
                            <a href="{% if platform == 'orcid' %}https://orcid.org/{{ id }}{% elif platform == 'researchgate' %}https://researchgate.net/profile/{{ id }}{% elif platform == 'google_scholar' %}https://scholar.google.com/citations?user={{ id }}{% elif platform == 'arxiv' %}https://arxiv.org/search/?searchtype=author&query={{ id }}{% endif %}" 
                               class="academic-card" target="_blank" rel="noopener noreferrer">
                                <div class="academic-icon">{{ platform|upper[:2] }}</div>
                                <h3>{{ platform|title|replace('_', ' ') }}</h3>
                                <p>View profile and publications</p>
                            </a>
                            {% endfor %}
                        </div>
                    </section>
                    {% endif %}
                    
                    {% elif page.slug == 'contact' %}
                    <!-- Contact page specific layout -->
                    <div class="contact-content">
                        <div class="contact-info">
                            {{ page.content }}
                        </div>
                        
                        <div class="contact-methods">
                            <div class="contact-card">
                                <h3>Professional Inquiry</h3>
                                <p>For research collaboration, consulting opportunities, or academic partnerships.</p>
                                {% if CONTACT_EMAIL %}
                                <a href="mailto:{{ CONTACT_EMAIL }}" class="contact-link">
                                    {{ CONTACT_EMAIL }}
                                </a>
                                {% endif %}
                            </div>
                            
                            <div class="contact-card">
                                <h3>Research Networks</h3>
                                <p>Connect through academic and professional platforms.</p>
                                <div class="network-links">
                                    {% for name, link in SOCIAL %}
                                    <a href="{{ link }}" class="network-link" target="_blank" rel="noopener noreferrer">
                                        {{ name }}
                                    </a>
                                    {% endfor %}
                                </div>
                            </div>
                            
                            <div class="contact-card">
                                <h3>Open Source</h3>
                                <p>Contribute to or inquire about open source projects.</p>
                                <a href="{{ GITHUB_URL or 'https://github.com/' + GITHUB_USERNAME }}" 
                                   class="contact-link" target="_blank" rel="noopener noreferrer">
                                    GitHub Profile
                                </a>
                            </div>
                        </div>
                    </div>
                    
                    {% elif page.slug == 'publications' %}
                    <!-- Publications page specific layout -->
                    <div class="publications-content">
                        {{ page.content }}
                        
                        <div class="publication-metrics">
                            <div class="metric-card">
                                <h3>Research Output</h3>
                                <p class="metric-note">Updated publication metrics and citation information available through academic profiles.</p>
                                <div class="metric-links">
                                    {% if ACADEMIC_PROFILES.google_scholar %}
                                    <a href="https://scholar.google.com/citations?user={{ ACADEMIC_PROFILES.google_scholar }}" 
                                       class="metric-link" target="_blank" rel="noopener noreferrer">
                                        Google Scholar
                                    </a>
                                    {% endif %}
                                    {% if ACADEMIC_PROFILES.orcid %}
                                    <a href="https://orcid.org/{{ ACADEMIC_PROFILES.orcid }}" 
                                       class="metric-link" target="_blank" rel="noopener noreferrer">
                                        ORCID
                                    </a>
                                    {% endif %}
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    {% else %}
                    <!-- Default page layout -->
                    <div class="page-body">
                        {{ page.content }}
                    </div>
                    {% endif %}
                </article>
                
                {% if page.toc and page.slug != 'about' and page.slug != 'contact' %}
                <aside class="page-sidebar">
                    <div class="table-of-contents">
                        <h3>Contents</h3>
                        {{ page.toc }}
                    </div>
                </aside>
                {% endif %}
            </div>
        </div>
    </main>
    
    {% if page.slug == 'about' %}
    <section class="about-cta">
        <div class="container">
            <div class="cta-content">
                <h2>Let's Collaborate</h2>
                <p>Interested in working together on computational research or European projects?</p>
                <div class="cta-actions">
                    <a href="/contact.html" class="btn btn-primary">Get in Touch</a>
                    <a href="/projects/" class="btn btn-secondary">View Projects</a>
                </div>
            </div>
        </div>
    </section>
    {% endif %}
</div>
{% endblock content %}